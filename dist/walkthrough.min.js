!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof module&&module.exports?module.exports=e():t.Walkthrough=e()}("undefined"!=typeof self?self:this,(function(){"use strict";return class{constructor(t={}){this.steps=[],this.currentStep=0,this.isActive=!1,this.callbacks={},this.templates={},this.options={overlayColor:"rgba(0, 0, 0, 0.5)",highlightPadding:10,animationDuration:300,scrollDuration:500,scrollOffset:100,zIndex:99999,popupWidth:380,popupOffset:15,popupClass:"wt-popup",showProgress:!0,progressColor:"#4CAF50",showButtons:!0,showSkip:!0,skipText:"Skip",prevText:"← Previous",nextText:"Next →",finishText:"Finish",keyboard:!0,escapeToExit:!0,arrowNavigation:!0,cookieName:"walkthrough_progress",cookieExpiry:30,rememberProgress:!1,closeOnOverlay:!0,autoStart:!1,startDelay:0,attributePrefix:"wt",stepAttribute:"step",titleAttribute:"title",textAttribute:"text",positionAttribute:"position",...t},this.elements={},this.init()}init(){this.createElements(),this.bindEvents(),this.options.autoStart&&setTimeout((()=>{this.scanForAttributeSteps(),this.steps.length>0&&this.start()}),this.options.startDelay)}createElements(){const t=document.createElement("div");t.className="wt-overlay",t.innerHTML=`\n                <style>\n                    .wt-overlay {\n                        position: absolute;\n                        top: 0;\n                        left: 0;\n                        width: 100%;\n                        /* Height will be set dynamically */\n                        z-index: ${this.options.zIndex};\n                        opacity: 0;\n                        visibility: hidden;\n                        transition: opacity ${this.options.animationDuration}ms ease;\n                        pointer-events: none;\n                    }\n                    .wt-overlay.active {\n                        opacity: 1;\n                        visibility: visible;\n                        pointer-events: none;\n                    }\n                    .wt-highlight {\n                        position: absolute;\n                        border-radius: 8px;\n                        transition: all ${this.options.animationDuration}ms ease;\n                        box-shadow: 0 0 0 99999px ${this.options.overlayColor};\n                        background: transparent;\n                        pointer-events: none;\n                        z-index: ${this.options.zIndex};\n                    }\n                    .wt-popup {\n                        position: absolute;\n                        background: white;\n                        border-radius: 12px;\n                        box-shadow: 0 10px 40px rgba(0,0,0,0.2);\n                        z-index: ${this.options.zIndex+1};\n                        max-width: ${this.options.popupWidth}px;\n                        opacity: 0;\n                        transform: scale(0.9);\n                        transition: all ${this.options.animationDuration}ms ease;\n                        pointer-events: auto;\n                    }\n                    .wt-popup.active {\n                        opacity: 1;\n                        transform: scale(1);\n                    }\n                    .wt-popup-arrow {\n                        position: absolute;\n                        width: 0;\n                        height: 0;\n                        border-style: solid;\n                        border-color: transparent;\n                    }\n                    .wt-popup-arrow.top {\n                        bottom: 100%;\n                        left: 50%;\n                        transform: translateX(-50%);\n                        border-width: 0 10px 10px 10px;\n                        border-bottom-color: white;\n                    }\n                    .wt-popup-arrow.bottom {\n                        top: 100%;\n                        left: 50%;\n                        transform: translateX(-50%);\n                        border-width: 10px 10px 0 10px;\n                        border-top-color: white;\n                    }\n                    .wt-popup-arrow.left {\n                        right: 100%;\n                        top: 50%;\n                        transform: translateY(-50%);\n                        border-width: 10px 10px 10px 0;\n                        border-right-color: white;\n                    }\n                    .wt-popup-arrow.right {\n                        left: 100%;\n                        top: 50%;\n                        transform: translateY(-50%);\n                        border-width: 10px 0 10px 10px;\n                        border-left-color: white;\n                    }\n                    .wt-popup-content {\n                        padding: 24px;\n                    }\n                    .wt-popup-header {\n                        margin-bottom: 16px;\n                    }\n                    .wt-popup-title {\n                        font-size: 20px;\n                        font-weight: 600;\n                        color: #1a1a1a;\n                        margin: 0 0 8px 0;\n                        line-height: 1.3;\n                    }\n                    .wt-popup-step-count {\n                        font-size: 12px;\n                        color: #666;\n                        font-weight: 500;\n                        text-transform: uppercase;\n                        letter-spacing: 0.5px;\n                    }\n                    .wt-popup-body {\n                        font-size: 15px;\n                        line-height: 1.6;\n                        color: #444;\n                        margin-bottom: 20px;\n                    }\n                    .wt-progress {\n                        height: 4px;\n                        background: #e0e0e0;\n                        border-radius: 2px;\n                        overflow: hidden;\n                        margin-bottom: 20px;\n                    }\n                    .wt-progress-bar {\n                        height: 100%;\n                        background: ${this.options.progressColor};\n                        border-radius: 2px;\n                        transition: width ${this.options.animationDuration}ms ease;\n                    }\n                    .wt-popup-footer {\n                        display: flex;\n                        justify-content: space-between;\n                        align-items: center;\n                    }\n                    .wt-btn {\n                        padding: 10px 20px;\n                        border-radius: 6px;\n                        font-size: 14px;\n                        font-weight: 500;\n                        cursor: pointer;\n                        transition: all 0.2s ease;\n                        border: none;\n                        outline: none;\n                    }\n                    .wt-btn:hover {\n                        transform: translateY(-1px);\n                        box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n                    }\n                    .wt-btn:active {\n                        transform: translateY(0);\n                    }\n                    .wt-btn-skip {\n                        background: none;\n                        color: #666;\n                        padding: 10px;\n                    }\n                    .wt-btn-skip:hover {\n                        color: #333;\n                        background: rgba(0,0,0,0.05);\n                    }\n                    .wt-btn-prev {\n                        background: #f5f5f5;\n                        color: #666;\n                        border: 1px solid #ddd;\n                    }\n                    .wt-btn-prev:hover {\n                        background: #e8e8e8;\n                    }\n                    .wt-btn-next, .wt-btn-finish {\n                        background: ${this.options.progressColor};\n                        color: white;\n                    }\n                    .wt-btn-next:hover, .wt-btn-finish:hover {\n                        background: ${this.adjustColor(this.options.progressColor,-20)};\n                    }\n                    .wt-btn-group {\n                        display: flex;\n                        gap: 12px;\n                    }\n                </style>\n            `;const e=document.createElement("div");e.className="wt-highlight";const n=document.createElement("div");n.className=this.options.popupClass,t.appendChild(e),t.appendChild(n),document.body.appendChild(t),this.elements={overlay:t,highlight:e,popup:n}}bindEvents(){this.options.closeOnOverlay&&this.elements.overlay.addEventListener("click",(t=>{t.target===this.elements.overlay&&this.end()})),this.options.keyboard&&(this.keyHandler=t=>{this.isActive&&(this.options.escapeToExit&&"Escape"===t.key?this.end():this.options.arrowNavigation&&("ArrowRight"===t.key||"Enter"===t.key?this.next():"ArrowLeft"===t.key&&this.prev()))},document.addEventListener("keydown",this.keyHandler)),this.positionHandler=()=>{this.isActive&&this.currentStep<this.steps.length&&this.positionElements()},this.throttledPositionHandler=this.throttle(this.positionHandler,100),window.addEventListener("resize",this.throttledPositionHandler),window.addEventListener("scroll",this.throttledPositionHandler,!0)}scanForAttributeSteps(){const t=this.options.attributePrefix,e=`data-${t}-${this.options.stepAttribute}`,n=document.querySelectorAll(`[${e}]`),o=Array.from(n).map((n=>{const o=parseInt(n.getAttribute(e)),s=n.getAttribute(`data-${t}-${this.options.titleAttribute}`),i=n.getAttribute(`data-${t}-${this.options.textAttribute}`),r=n.getAttribute(`data-${t}-${this.options.positionAttribute}`);return{element:n,step:o,title:s,text:i,position:r}}));o.sort(((t,e)=>t.step-e.step)),this.steps=o}configure(t){t.steps&&(this.steps=t.steps.map((t=>("string"==typeof t.element&&(t.element=document.querySelector(t.element)),t)))),t.options&&Object.assign(this.options,t.options),t.callbacks&&(this.callbacks={...this.callbacks,...t.callbacks}),t.templates&&(this.templates={...this.templates,...t.templates})}start(t=null){0!==this.steps.length?(this.elements.overlay.style.height=`${document.documentElement.scrollHeight}px`,null===t&&this.options.rememberProgress&&(t=this.loadProgress()),this.currentStep=t||0,this.isActive=!0,this.triggerCallback("onStart"),this.elements.overlay.classList.add("active"),setTimeout((()=>{this.showStep(this.currentStep)}),50)):console.warn("Walkthrough: No steps configured")}showStep(t){if(t<0||t>=this.steps.length)return;this.elements.popup.classList.remove("active");const e=this.steps[t];this.currentStep=t,this.options.rememberProgress&&this.saveProgress(t),this.triggerCallback("onStep",e,t),e.element&&this.scrollToElement(e.element,(()=>{this.positionElements(),this.updatePopup(e,t),setTimeout((()=>{this.elements.popup.classList.add("active")}),50)}))}positionElements(){const t=this.steps[this.currentStep];if(!t||!t.element)return;this.elements.overlay.style.height=`${document.documentElement.scrollHeight}px`;const e=t.element.getBoundingClientRect(),n=this.options.highlightPadding,o=window.pageYOffset||document.documentElement.scrollTop,s=window.pageXOffset||document.documentElement.scrollLeft,i=this.elements.highlight;i.style.left=e.left+s-n+"px",i.style.top=e.top+o-n+"px",i.style.width=`${e.width+2*n}px`,i.style.height=`${e.height+2*n}px`,this.positionPopup(e,t.position)}positionPopup(t,e){const n=this.elements.popup;n.style.visibility="hidden",n.style.display="block";const o=n.getBoundingClientRect();n.style.visibility="",n.style.display="";const s=this.options.popupOffset,i=this.options.highlightPadding,r=window.innerWidth,p=window.innerHeight,a={bottom:{left:t.left+t.width/2-o.width/2,top:t.bottom+i+s,arrow:"top",fits:t.bottom+i+s+o.height<p},top:{left:t.left+t.width/2-o.width/2,top:t.top-i-s-o.height,arrow:"bottom",fits:t.top-i-s-o.height>0},right:{left:t.right+i+s,top:t.top+t.height/2-o.height/2,arrow:"left",fits:t.right+i+s+o.width<r},left:{left:t.left-i-s-o.width,top:t.top+t.height/2-o.height/2,arrow:"right",fits:t.left-i-s-o.width>0}};let h=e&&a[e]?.fits?e:Object.keys(a).find((t=>a[t].fits))||"bottom";const l=a[h],d=window.pageYOffset||document.documentElement.scrollTop,c=window.pageXOffset||document.documentElement.scrollLeft,u=Math.max(10,Math.min(l.left,r-o.width-10))+c,w=Math.max(10,Math.min(l.top,p-o.height-10))+d;n.style.left=`${u}px`,n.style.top=`${w}px`,this.updateArrow(l.arrow)}updateArrow(t){const e=this.elements.popup,n=e.querySelector(".wt-popup-arrow");n&&n.remove();const o=document.createElement("div");o.className=`wt-popup-arrow ${t}`,e.appendChild(o)}updatePopup(t,e){const n=this.elements.popup,o=0===e,s=e===this.steps.length-1;let i;i=this.templates.popup?this.templates.popup(t,e,this.steps.length):this.getDefaultPopupContent(t,e,o,s),n.innerHTML=i,this.bindPopupButtons()}getDefaultPopupContent(t,e,n,o){return`\n                <div class="wt-popup-content">\n                    ${t.title||this.options.showProgress?`\n                        <div class="wt-popup-header">\n                            ${t.title?`<h3 class="wt-popup-title">${t.title}</h3>`:""}\n                            ${this.options.showProgress?`\n                                <div class="wt-popup-step-count">\n                                    Step ${e+1} of ${this.steps.length}\n                                </div>\n                            `:""}\n                        </div>\n                    `:""}\n\n                    ${t.text?`\n                        <div class="wt-popup-body">\n                            ${t.text}\n                        </div>\n                    `:""}\n\n                    ${this.options.showProgress?`\n                        <div class="wt-progress">\n                            <div class="wt-progress-bar" style="width: ${(e+1)/this.steps.length*100}%"></div>\n                        </div>\n                    `:""}\n\n                    ${this.options.showButtons?`\n                        <div class="wt-popup-footer">\n                            ${this.options.showSkip?`\n                                <button class="wt-btn wt-btn-skip" data-wt-action="skip">\n                                    ${t.skipText||this.options.skipText}\n                                </button>\n                            `:"<div></div>"}\n\n                            <div class="wt-btn-group">\n                                ${n?"":`\n                                    <button class="wt-btn wt-btn-prev" data-wt-action="prev">\n                                        ${t.prevText||this.options.prevText}\n                                    </button>\n                                `}\n\n                                <button class="wt-btn ${o?"wt-btn-finish":"wt-btn-next"}"\n                                        data-wt-action="${o?"finish":"next"}">\n                                    ${o?t.finishText||this.options.finishText:t.nextText||this.options.nextText}\n                                </button>\n                            </div>\n                        </div>\n                    `:""}\n                </div>\n            `}bindPopupButtons(){this.elements.popup.querySelectorAll("[data-wt-action]").forEach((t=>{t.addEventListener("click",(t=>{switch(t.currentTarget.getAttribute("data-wt-action")){case"skip":this.end();break;case"prev":this.prev();break;case"next":this.next();break;case"finish":this.finish()}}))}))}next(){this.currentStep<this.steps.length-1?this.showStep(this.currentStep+1):this.finish()}prev(){this.currentStep>0&&this.showStep(this.currentStep-1)}finish(){this.triggerCallback("onFinish"),this.clearProgress(),this.end()}end(){this.isActive&&(this.isActive=!1,this.triggerCallback("onEnd"),this.elements.popup.classList.remove("active"),setTimeout((()=>{this.elements.overlay.classList.remove("active")}),this.options.animationDuration))}scrollToElement(t,e){const n=t.getBoundingClientRect();if(n.top>=0&&n.bottom<=window.innerHeight)return void e();const o=this.options.scrollOffset,s=window.pageYOffset+n.top-o,i=window.pageYOffset,r=s-i,p=this.options.scrollDuration;let a;const h=t=>{a||(a=t);const n=t-a,o=Math.min(n/p,1);window.scrollTo(0,i+r*this.easeInOut(o)),n<p?requestAnimationFrame(h):e()};requestAnimationFrame(h)}easeInOut(t){return t<.5?2*t*t:(4-2*t)*t-1}saveProgress(t){const e=new Date;e.setDate(e.getDate()+this.options.cookieExpiry),document.cookie=`${this.options.cookieName}=${t};expires=${e.toUTCString()};path=/`}loadProgress(){const t=document.cookie.split(";");for(let e of t){const[t,n]=e.trim().split("=");if(t===this.options.cookieName)return parseInt(n)||0}return 0}clearProgress(){document.cookie=`${this.options.cookieName}=;expires=Thu, 01 Jan 1970 00:00:00 UTC;path=/`}triggerCallback(t,...e){"function"==typeof this.callbacks[t]&&this.callbacks[t](...e)}throttle(t,e){let n;return function(){const o=arguments,s=this;n||(t.apply(s,o),n=!0,setTimeout((()=>n=!1),e))}}adjustColor(t,e){const n="#"===t[0],o=n?t.slice(1):t,s=parseInt(o,16);let i=(s>>16)+e,r=(s>>8&255)+e,p=(255&s)+e;return i=i>255?255:i<0?0:i,r=r>255?255:r<0?0:r,p=p>255?255:p<0?0:p,(n?"#":"")+(i<<16|r<<8|p).toString(16).padStart(6,"0")}destroy(){this.keyHandler&&document.removeEventListener("keydown",this.keyHandler),this.throttledPositionHandler&&(window.removeEventListener("resize",this.throttledPositionHandler),window.removeEventListener("scroll",this.throttledPositionHandler,!0)),this.elements.overlay&&this.elements.overlay.remove(),this.steps=[],this.currentStep=0,this.isActive=!1}}})),window.walkthrough={fromAttributes:function(t={}){const e=new Walkthrough(t);return e.scanForAttributeSteps(),e},fromJSON:function(t){const e=new Walkthrough(t.options||{});return e.configure(t),e},start:function(t,e={}){const n=new Walkthrough(e);return n.configure({steps:t}),n.start(),n}};